Same as experiment 5 except fixed a bug with new select_action() function